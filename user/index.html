<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <script src="../js/data.js" type="text/javascript"></script>
    <script src="../js/mg-frontend.js" type="text/javascript"></script>
    <link rel="stylesheet" href="../css/mg-framework/mg-framework.css"/>
    <link rel="stylesheet" href="../css/main.css"/>
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Maintenance Tracker - User</title>
</head>
<body>
<div class="mg sidebar" data-trigger="openSidebar">
    <div class="menu">
        <a class="item active" href="index.html">
            <i class="icon fas fa-tachometer-alt"></i>
            <div class="title center aligned">My Dashboard</div>
        </a>
        <a class="item" href="requests.html">
            <i class="icon fas fa-cogs"></i>
            <div class="title center aligned">
                <div class="title">Repair Requests</div>
            </div>
        </a>
        <a class="item" href="feedback.html">
            <i class="icon fas fa-comments"></i>
            <div class="title center aligned">
                <div class="title">My Feedback</div>
            </div>
        </a>
        <div class="item" id="mobileNotifications">
            <i class="icon fas fa-bell"></i>
            <div class="title center aligned">
                <div class="title">My Notifications</div>
            </div>
        </div>
    </div>
</div>
<div class="mg pushable">
    <div class="mg navbar">
        <i class="open fas fa-bars" id="openSidebar"></i>
        <div class="header">Maintenance Tracker</div>
        <div class="menu">
            <div class="link item" id="largeScreenNotifications">
                <div class="mg dropdown notifications">
                    <div class="trigger">
                        Notifications
                        <button class="mg very tiny circle button primary" style="margin-left: 1em;">2</button>
                    </div>
                    <div class="menu">
                        <div class="item">
                            <div class="notification">
                                <i class="close fas fa-times"></i>
                                <img src="../images/user-male.png" alt="" class="mg tiny circle image">
                                <div class="content">
                                    <div class="title">
                                        Moses Gitau
                                    </div>
                                    <div class="date">
                                        5 minutes ago
                                    </div>
                                    <div class="description">
                                        Your device has been approved
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="item">
                            <div class="notification">
                                <i class="close fas fa-times"></i>
                                <img src="../images/user-male.png" alt="" class="mg tiny circle image">
                                <div class="content">
                                    <div class="title">
                                        Moses Gitau
                                    </div>
                                    <div class="date">
                                        5 minutes ago
                                    </div>
                                    <div class="description">
                                        Your device has been rejected.
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="item right aligned">
                <div class="mg dropdown">
                    <div class="trigger">
                        <div class="account-options">
                            <div class="title">Moses Gitau</div>
                            <img src="../images/user-male.png" class="mg tiny image"/></div>
                    </div>
                    <div class="menu" style="width: 100%">
                        <a class="item" href="../login.html">Logout <i class="fas fa-sign-out-alt"></i></a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="mg content">
        <h2>Requests</h2>
        <div class="mg row">
            <a class="request button" href="new-request.html">
                <button class="mg blue-grey circle small button">
                    <i class="fas fa-plus"></i>
                </button>
                <div class="title">Make Request</div>
            </a>
            <a class="request button" href="feedback.html">
                <button class="mg pink circle small button">
                    <i class="fas fa-comments"></i>
                </button>
                <div class="title">Feedback</div>
            </a>
        </div>
        <div class="mg vertical divider"></div>

        <div class="mg row">
            <div class="three-large six-medium six-small column">
                <div class="padded">
                    <div class="mg segment fluid" id="user-home-resolved">
                        <div class="header">
                            Resolved Repair Requests
                        </div>
                        <div class="content" style="color: #469d4a">
                            <h1 class="count">{{ data.total_results }}</h1>
                        </div>
                        <div class="footer">
                            <a href="requests.html" class="right aligned">View...</a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="three-large six-medium six-small column">
                <div class="padded">
                    <div class="mg segment" id="user-home-rejected">
                        <div class="header">
                            Rejected Repair Requests
                        </div>
                        <div class="content" style="color: red">
                            <h1 class="count">{{ data.total_results }}</h1>
                        </div>
                        <div class="footer">
                            <a href="requests.html" class="right aligned">View...</a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="six-large twelve-medium twelve-small column">
                <div class="padded">
                    <div class="mg segment fluid">
                        <div class="header">
                            Latest Feedback
                        </div>
                        <div class="content feedback-container" id="user-home-feedback">
                            <div m-if="data.length == 0" class="empty">
                                No feedback yet <br/>
                                <i class="fas fa-database"></i>
                            </div>
                            <a class="feedback" href="new-request.html" m-for="feed in data" m-else>
                                <img src="../images/user-male.png" alt="" class="mg tiny circle image">
                                <div class="content">
                                    <div class="title">
                                        {{ feed.created_by.firstname }} {{ feed.created_by.lastname }}
                                    </div>
                                    <div class="date">
                                        {{ feed.feedback.updated_at }}
                                    </div>
                                    <div class="description">
                                        {{ feed.feedback.message }}
                                    </div>
                                </div>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="mg vertical divider"></div>
        <div class="mg table" id="user-home-requests">
            <h2>Latest Maintenance/Repair Requests</h2>
            <div m-if="data.requests.length == 0" class="empty">
                No maintenance/repair requests <br/>
                <i class="fas fa-database"></i>
            </div>
            <table m-else>
                <thead>
                <tr>
                    <th>Request ID</th>
                    <th>Request Date</th>
                    <th>Product Name</th>
                    <th>Product Image</th>
                    <th>Repair/Maintenance Request Description</th>
                    <th>Status</th>
                </tr>
                </thead>
                <tbody>
                <tr m-for="request in data.requests">
                    <td><a href="request.html">#{{ request.id }}</a></td>
                    <td>{{ request.created_at }}</td>
                    <td>{{ request.product_name }}</td>
                    <td>
                        <img src="{{ request.photo }}" class="mg small image" m-if="request.photo != ''"/>
                        <img src="../images/placeholder.png" class="mg small image" m-else=""/>
                    </td>
                    <td>{{ request.description }}</td>
                    <td>
                        <button class="mg teal circle tiny button" m-if="request.status === 'Resolved' ">
                            <i class="fas fa-cogs"></i>
                        </button>
                        <button class="mg blue-grey circle tiny button" m-if="request.status === 'Pending'">
                            <i class="fas fa-cogs"></i>
                        </button>
                        <button class="mg success circle tiny button" m-if="request.status === 'Approved'">
                            <i class="fas fa-cogs"></i>
                        </button>
                        <button class="mg danger circle tiny button" m-if="request.status === 'Rejected'">
                            <i class="fas fa-cogs"></i>
                        </button>
                        <div class="title">{{ request.status }}</div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
<div class="mg modal" data-trigger="mobileNotifications">
    <div class="body">
        <i class="close fas fa-times"></i>
        <div class="title">
            Notifications
        </div>
        <div class="content">
            <div class="notifications">
                <div class="item">
                    <div class="notification">
                        <img src="../images/user-male.png" alt="" class="mg tiny circle image">
                        <div class="content">
                            <div class="title">
                                Moses Gitau
                            </div>
                            <div class="date">
                                5 minutes ago
                            </div>
                            <div class="description">
                                Your request has been rejected.
                            </div>
                        </div>
                    </div>
                </div>
                <div class="item">
                    <div class="notification">
                        <img src="../images/user-male.png" alt="" class="mg tiny circle image">
                        <div class="content">
                            <div class="title">
                                Moses Gitau
                            </div>
                            <div class="date">
                                5 minutes ago
                            </div>
                            <div class="description">
                                Your request has been approved.
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="footer">
            <button class="mg primary button">Ok</button>
        </div>
    </div>
</div>
<script src="../js/user-home.js"></script>
<script src="../js/mg-framework/mg-framework.js"></script>
</body>
</html>