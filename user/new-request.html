<!DOCTYPE html>
<html lang="en">
<head>
    <script src="../js/mg-frontend.js"></script>
    <script src="../js/data.js"></script>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="../css/mg-framework/mg-framework.css"/>
    <link rel="stylesheet" href="../css/main.css"/>
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Maintenance Tracker - User</title>
</head>
<body>
<div class="mg sidebar" data-trigger="openSidebar">
    <div class="menu">
        <a class="item" href="index.html">
            <i class="icon fas fa-tachometer-alt"></i>
            <div class="title center aligned">My Dashboard</div>
        </a>
        <a class="item" href="requests.html">
            <i class="icon fas fa-cogs"></i>
            <div class="title center aligned">
                <div class="title">Repair Requests</div>
            </div>
        </a>
        <a class="item" href="feedback.html">
            <i class="icon fas fa-comments"></i>
            <div class="title center aligned">
                <div class="title">My Feedback</div>
            </div>
        </a>
        <div class="item" id="mobileNotifications">
            <i class="icon fas fa-bell"></i>
            <div class="title center aligned">
                <div class="title">My Notifications</div>
            </div>
        </div>
    </div>
</div>
<div class="mg pushable">
    <div class="mg navbar">
        <i class="open fas fa-bars" id="openSidebar"></i>
        <div class="header">Maintenance Tracker</div>
        <div class="menu">
            <div class="link item" id="largeScreenNotifications">
                <div class="mg dropdown notifications" id="user-home-notifications">
                    <div class="trigger">
                        Notifications
                        <button class="mg very tiny circle button primary" style="margin-left: 1em;">
                            {{ data.total_results }}
                        </button>
                    </div>
                    <div class="menu">
                        <div class="item" m-if="data.notifications.length == 0">
                            <div class="content">
                                <div class="title">
                                    No notifications
                                </div>
                                <div class="description">
                                    You do not have any unread notifications
                                </div>
                            </div>
                        </div>
                        <div class="item" m-else m-for="notification in data.notifications">
                            <div class="notification" m-on:click="readNotification(notification.id)">
                                <i class="close fas fa-times"></i>
                                <img src="../images/user-male.png" alt="" class="mg tiny circle image">
                                <div class="content">
                                    <div class="title">
                                        {{ notification.admin.firstname }} {{ notification.admin.lastname }}
                                    </div>
                                    <div class="date">
                                        {{ notification.created_at }}
                                    </div>
                                    <div class="description">
                                        {{ notification.message }}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="item right aligned">
                <div class="mg dropdown">
                    <div class="trigger">
                        <div class="account-options" id="user-name">
                            <div class="title">Moses Gitau</div>
                            <img src="../images/user-male.png" class="mg tiny image"/></div>
                    </div>
                    <div class="menu" style="width: 100%">
                        <a class="item" id="logout">Logout <i class="fas fa-sign-out-alt"></i></a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="mg content">
        <h2>Requests</h2>
        <div class="mg row">
            <a class="request button" href="new-request.html">
                <button class="mg blue-grey circle small button">
                    <i class="fas fa-plus"></i>
                </button>
                <div class="title">Make Request</div>
            </a>
            <a class="request button" href="feedback.html">
                <button class="mg pink circle small button">
                    <i class="fas fa-comments"></i>
                </button>
                <div class="title">Feedback</div>
            </a>
        </div>
        <div class="mg vertical divider"></div>

        <div class="mg segment">
            <div class="header">
                New Maintenance/Repair Request
            </div>
            <div class="content">

                <div class="mg row">
                    <div class="six-large eight-medium twelve-small column center">
                        <form action="" class="mg form" method="post" enctype="multipart/form-data"
                              id="new-request-form">
                            <div class="status">
                                <div class="mg segment error" m-if="status === 'error'">
                                    <ul>
                                        <li m-for="error in message">{{ error }}</li>
                                    </ul>
                                </div>
                                <div class="mg segment success" m-else>
                                    <ul>
                                        <li>Maintenance Requested successfully</li>
                                    </ul>
                                </div>
                            </div>
                            <div class="field">
                                <label>Photo</label>
                                <div class="fields">
                                    <div class="four-large four-medium six-small field">
                                        <img src="../images/placeholder.png" class="mg image" id="product-photo-img"
                                             style="width: 100%"/>
                                    </div>
                                    <div class="eight-large eight-medium six-small field">
                                        <label for="product-photo">Choose Photo
                                            <input type="file" size="10" id="product-photo" required
                                                   onchange="displayImageChosen(this)"
                                                   accept="image/png, image/jpeg"/>
                                            <input type="hidden" name="photo" id="product-photo-input">
                                        </label>
                                        <button class="mg danger button" onclick="removePhoto()"
                                                type="button" id="product-photo-remove">Remove
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <div class="field">
                                <label>Product Name</label>
                                <input type="text" name="product_name" id="new-request-product-name" required
                                       placeholder="Product Name"/>
                            </div>
                            <div class="field">
                                <label>Description</label>
                                <textarea rows="10" name="description" required id="new-request-description"></textarea>
                            </div>
                            <div class="field">
                                <div class="fields">
                                    <div class="field">
                                        <button class="mg button" type="button" onclick="clearRequestForm()">Cancel
                                        </button>
                                    </div>
                                    <div class="field">
                                        <button class="mg primary button" type="button" onclick="submitMaintenanceRequest()">Submit</button>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>

    </div>
</div>
<div class="mg modal" data-trigger="mobileNotifications">
    <div class="body">
        <i class="close fas fa-times"></i>
        <div class="title">
            Notifications
        </div>
        <div class="content">
            <div class="notifications" id="user-home-notifications-2">
                <div m-if="data.notifications.length == 0" class="empty">
                    No notifications
                </div>
                <div class="item" m-else>
                    <div class="notification" m-for="notification in data.notifications">
                        <i class="close fas fa-times"></i>
                        <img src="../images/user-male.png" alt="" class="mg tiny circle image">
                        <div class="content">
                            <div class="title">
                                {{ notification.admin.firstname }} {{ notification.admin.lastname }}
                            </div>
                            <div class="date">
                                {{ notification.created_at }}
                            </div>
                            <div class="description">
                                {{ notification.message }}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="footer">
            <button class="mg primary button">Ok</button>
        </div>
    </div>
</div>
<script src="../js/mg-framework/mg-framework.js"></script>
<script src="../js/new-request.js"></script>
</body>
</html>